!function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var i=new(function(){function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e(this,"rows",50),e(this,"cols",50),e(this,"playing",!1),e(this,"timer",0),e(this,"reproductionTime",1e3),e(this,"grid",new Array(this.rows)),e(this,"nextGrid",new Array(this.rows)),e(this,"gameCondtition",!1)}var n,r;return n=i,(r=[{key:"initializeGrids",value:function(){for(var t=0;t<this.rows;t++)this.grid[t]=new Array(this.cols),this.nextGrid[t]=new Array(this.cols)}},{key:"resetGrids",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.grid[t][e]=0,this.nextGrid[t][e]=0}},{key:"copyAndResetGrid",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.grid[t][e]=this.nextGrid[t][e],this.nextGrid[t][e]=0}},{key:"initialize",value:function(){"complete"===document.readyState&&(this.createTable(),this.initializeGrids(),this.resetGrids(),this.setupControlButtons())}},{key:"createTable",value:function(){var t=this,e=document.getElementById("gridContainer");e||console.error("Problem: No div for the drid table!");for(var i=document.createElement("table"),n=0;n<this.rows;n++){for(var r=document.createElement("tr"),s=function(e){var i=document.createElement("td"),s="";s=s.concat(String(n),"_",String(e)),i.setAttribute("id",s),i.setAttribute("class","dead"),i.addEventListener("click",(function(e){t.cellClickHandler(i)})),r.appendChild(i)},o=0;o<this.cols;o++)s(o);i.appendChild(r)}return e.appendChild(i),!0}},{key:"cellClickHandler",value:function(t){var e=t.id.split("_"),i=Number(e[0]),n=Number(e[1]);t.getAttribute("class").indexOf("live")>-1?(t.setAttribute("class","dead"),this.grid[i][n]=0):(t.setAttribute("class","live"),this.grid[i][n]=1)}},{key:"updateView",value:function(t){for(var e=0;e<this.rows;e++)for(var i=0;i<this.cols;i++){var n="";n=n.concat(String(e),"_",String(i));var r=document.getElementById(n);0===t[e][i]&&r.setAttribute("class","dead"),2===t[e][i]&&r.setAttribute("class","pre"),1===t[e][i]&&r.setAttribute("class","live")}}},{key:"setupControlButtons",value:function(){var t=this,e=document.getElementById("start");e.addEventListener("click",(function(){t.startButtonHandler(e)})),document.getElementById("clear").addEventListener("click",(function(e){t.clearButtonHandler()})),document.getElementById("random").addEventListener("click",(function(e){t.randomButtonHandler()}));var i=document.getElementById("speed"),n=document.createElement("option");n.innerText="x1",i.append(n),(n=document.createElement("option")).innerText="x2",i.append(n),(n=document.createElement("option")).innerText="x4",i.append(n),i.addEventListener("change",(function(e){t.speedHandler(e.target)}))}},{key:"randomButtonHandler",value:function(){if(!this.playing){this.clearButtonHandler();for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)if(1===Math.round(Math.random())){var i="";i=i.concat(String(t),"_",String(e)),document.getElementById(i).setAttribute("class","live"),this.grid[t][e]=1}this.gameCondtition=!0}}},{key:"clearButtonHandler",value:function(){var t=document.getElementById("x-ax"),e=document.getElementById("y-ax");if(void 0!==t.value&&""!==t.value&&void 0!==e.value&&""!==e.value){this.playing=!1,document.getElementById("start").innerHTML="Старт",clearTimeout(this.timer);for(var i=document.getElementsByClassName("live"),n=[],r=0;r<i.length;r++)n.push(i[r]);for(var s=0;s<n.length;s++)n[s].setAttribute("class","dead");this.resetGrids(),this.rows=Number(t.value),this.cols=Number(e.value),document.getElementById("gridContainer").innerHTML="",this.grid=new Array(this.rows),this.nextGrid=new Array(this.rows),this.createTable(),this.initializeGrids(),this.resetGrids()}}},{key:"speedHandler",value:function(t){var e=t.value;"x1"===e&&(this.reproductionTime=1e3),"x2"===e&&(this.reproductionTime=500),"x4"===e&&(this.reproductionTime=250)}},{key:"startButtonHandler",value:function(t){if(!0===this.gameCondtition)if(this.playing)this.playing=!1,t.innerHTML="Продолжить",clearTimeout(this.timer);else{this.playing=!0,t.innerHTML="Пауза";var e=document.getElementById("speed").value;"x1"===e&&(this.reproductionTime=1e3),"x2"===e&&(this.reproductionTime=500),"x4"===e&&(this.reproductionTime=250),this.play(this.grid)}}},{key:"play",value:function(t){var e=this;this.computeNextGen(),this.playing&&!0===this.gameCondtition&&setTimeout((function(){return e.play(e.grid)}),this.reproductionTime)}},{key:"computeNextGen",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.applyRules(t,e);this.copyAndResetGrid(),this.updateView(this.grid);var i=this.grid.flat(1/0).filter((function(t){return t>0}));console.log(i),0===i.length&&(this.gameCondtition=!1,this.playing=!1,document.getElementById("start").innerHTML="Старт")}},{key:"applyRules",value:function(t,e){var i=this.countNeighbors(t,e);1===this.grid[t][e]?i<2?this.nextGrid[t][e]=2:2===i||3===i?this.nextGrid[t][e]=1:i>3&&(this.nextGrid[t][e]=2):0===this.grid[t][e]&&3===i&&(this.nextGrid[t][e]=1),2===this.grid[t][e]&&(this.nextGrid[t][e]=0)}},{key:"countNeighbors",value:function(t,e){var i=0;return t-1>=0&&1===this.grid[t-1][e]&&i++,t-1>=0&&e-1>=0&&1===this.grid[t-1][e-1]&&i++,t-1>=0&&e+1<this.cols&&1===this.grid[t-1][e+1]&&i++,e-1>=0&&1===this.grid[t][e-1]&&i++,e+1<this.cols&&1===this.grid[t][e+1]&&i++,t+1<this.rows&&1===this.grid[t+1][e]&&i++,t+1<this.rows&&e-1>=0&&1===this.grid[t+1][e-1]&&i++,t+1<this.rows&&e+1<this.cols&&1===this.grid[t+1][e+1]&&i++,i}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),i}());console.log(i),window.onload=function(){i.initialize()}}();
//# sourceMappingURL=bundle.js.map