!function(){"use strict";function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var i=new(function(){function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e(this,"rows",50),e(this,"cols",50),e(this,"playing",!1),e(this,"timer",0),e(this,"reproductionTime",1e3),e(this,"grid",new Array(this.rows)),e(this,"nextGrid",new Array(this.rows)),e(this,"gameCondtition",!1),e(this,"gridContainer",Object.create(HTMLElement.prototype,{})),e(this,"startButton",Object.create(HTMLElement.prototype,{})),e(this,"clearButton",Object.create(HTMLElement.prototype,{})),e(this,"xValue",Object.create(HTMLElement.prototype,{})),e(this,"yValue",Object.create(HTMLElement.prototype,{})),e(this,"speedSelect",Object.create(HTMLElement.prototype,{})),e(this,"table",Object.create(HTMLTableElement.prototype,{}))}var r,n;return r=i,(n=[{key:"initializeGrids",value:function(){for(var t=0;t<this.rows;t++)this.grid[t]=new Array(this.cols),this.nextGrid[t]=new Array(this.cols)}},{key:"resetGrids",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.grid[t][e]=0,this.nextGrid[t][e]=0}},{key:"copyAndResetGrid",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.grid[t][e]=this.nextGrid[t][e],this.nextGrid[t][e]=0}},{key:"initialize",value:function(){"complete"===document.readyState&&(this.createTable(),this.initializeGrids(),this.resetGrids(),this.setupControlButtons())}},{key:"createTable",value:function(){var t=this;this.gridContainer=document.getElementById("gridContainer"),this.gridContainer||console.error("Нет контейнера для поля игры"),this.table=document.createElement("table");for(var e=0;e<this.rows;e++){for(var i=document.createElement("tr"),r=function(r){var n=document.createElement("td"),s="";s=s.concat(String(e),"_",String(r)),n.setAttribute("id",s),n.setAttribute("class","dead"),n.addEventListener("click",(function(e){t.cellClickHandler(n)})),i.appendChild(n)},n=0;n<this.cols;n++)r(n);this.table.appendChild(i)}return this.gridContainer.appendChild(this.table),!0}},{key:"cellClickHandler",value:function(t){var e=t.id.split("_"),i=Number(e[0]),r=Number(e[1]);t.getAttribute("class").indexOf("live")>-1?(t.setAttribute("class","dead"),this.grid[i][r]=0):(t.setAttribute("class","live"),this.grid[i][r]=1),this.gameCondtition=!0}},{key:"updateView",value:function(t){for(var e=0;e<this.rows;e++)for(var i=0;i<this.cols;i++){var r="";r=r.concat(String(e),"_",String(i));var n=document.getElementById(r);0===t[e][i]&&n.setAttribute("class","dead"),2===t[e][i]&&n.setAttribute("class","pre"),1===t[e][i]&&n.setAttribute("class","live")}}},{key:"setupControlButtons",value:function(){var t=this;this.startButton=document.getElementById("start"),this.startButton.addEventListener("click",(function(){t.startButtonHandler(t.startButton)})),this.clearButton=document.getElementById("clear"),this.clearButton.addEventListener("click",(function(){t.clearButtonHandler()})),document.getElementById("random").addEventListener("click",(function(){t.randomButtonHandler()})),this.speedSelect=document.getElementById("speed");var e=document.createElement("option");e.innerText="x1",this.speedSelect.append(e),(e=document.createElement("option")).innerText="x2",this.speedSelect.append(e),(e=document.createElement("option")).innerText="x4",this.speedSelect.append(e),this.speedSelect.addEventListener("change",(function(e){t.speedHandler(e.target)})),this.xValue=document.getElementById("x-ax"),this.yValue=document.getElementById("y-ax"),this.xValue.value=this.rows.toString(),this.yValue.value=this.cols.toString()}},{key:"randomButtonHandler",value:function(){if(!this.playing){this.clearButtonHandler();for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)if(1===Math.round(Math.random())){var i="";i=i.concat(String(t),"_",String(e)),document.getElementById(i).setAttribute("class","live"),this.grid[t][e]=1}this.gameCondtition=!0}}},{key:"clearButtonHandler",value:function(){if(console.clear(),void 0!==this.xValue.value&&""!==this.xValue.value&&void 0!==this.yValue.value&&""!==this.yValue.value)if(!0===this.playing){this.playing=!1;for(var t=Number(this.xValue.value),e=Number(this.yValue.value),i=new Array(t),r=new Array(t),n=0;n<t;n++)i[n]=new Array(e),r[n]=new Array(e);for(var s=0;s<t;s++)for(var a=0;a<e;a++)s<this.rows&&(a<this.cols?(console.log(s,a),i[s][a]=this.grid[s][a],r[s][a]=this.grid[s][a]):(i[s][a]=0,r[s][a]=0));this.rows=t,this.cols=e,this.grid=i,this.nextGrid=r,this.gridContainer.innerHTML="",this.createTable(),this.updateView(this.grid),this.playing=!0}else{this.playing=!1,this.startButton.innerHTML="Старт",clearTimeout(this.timer);for(var o=document.getElementsByClassName("live"),l=[],h=0;h<o.length;h++)l.push(o[h]);for(var d=0;d<l.length;d++)l[d].setAttribute("class","dead");this.resetGrids(),this.rows=Number(this.xValue.value),this.cols=Number(this.yValue.value),this.gridContainer.innerHTML="",this.grid=new Array(this.rows),this.nextGrid=new Array(this.rows),this.createTable(),this.initializeGrids(),this.resetGrids()}}},{key:"speedHandler",value:function(t){var e=t.value;"x1"===e&&(this.reproductionTime=1e3),"x2"===e&&(this.reproductionTime=500),"x4"===e&&(this.reproductionTime=250)}},{key:"startButtonHandler",value:function(t){this.clearButton.innerHTML="Обновить",!0===this.gameCondtition&&(this.playing?(this.playing=!1,t.innerHTML="Продолжить",clearTimeout(this.timer)):(this.playing=!0,t.innerHTML="Пауза",this.play(this.grid)))}},{key:"play",value:function(t){var e=this;this.computeNextGen(),this.playing&&!0===this.gameCondtition&&setTimeout((function(){return e.play(e.grid)}),this.reproductionTime)}},{key:"computeNextGen",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.cols;e++)this.applyRules(t,e);this.copyAndResetGrid(),this.updateView(this.grid);var i=this.grid.flat(1/0).filter((function(t){return t>0}));console.log(i),0===i.length&&(this.gameCondtition=!1,this.playing=!1,this.startButton.innerHTML="Старт")}},{key:"applyRules",value:function(t,e){var i=this.countNeighbors(t,e);1===this.grid[t][e]?i<2?this.nextGrid[t][e]=2:2===i||3===i?this.nextGrid[t][e]=1:i>3&&(this.nextGrid[t][e]=2):0===this.grid[t][e]&&3===i&&(this.nextGrid[t][e]=1),2===this.grid[t][e]&&(this.nextGrid[t][e]=0)}},{key:"countNeighbors",value:function(t,e){var i=0;return t-1>=0&&1===this.grid[t-1][e]&&i++,t-1>=0&&e-1>=0&&1===this.grid[t-1][e-1]&&i++,t-1>=0&&e+1<this.cols&&1===this.grid[t-1][e+1]&&i++,e-1>=0&&1===this.grid[t][e-1]&&i++,e+1<this.cols&&1===this.grid[t][e+1]&&i++,t+1<this.rows&&1===this.grid[t+1][e]&&i++,t+1<this.rows&&e-1>=0&&1===this.grid[t+1][e-1]&&i++,t+1<this.rows&&e+1<this.cols&&1===this.grid[t+1][e+1]&&i++,i}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),i}());console.log(i),window.onload=function(){i.initialize()}}();
//# sourceMappingURL=bundle.js.map